version: 2
models:
  - name: int_movies_mapping
    description: |
      Intermediate model for mapping and combining movie data from TMDB, OMDB, IMDB and Rotten Tomatoes APIs.

    columns:
      - name: tmdb_id
        description: |
          {{ doc("stg_tmdb_movies__tmdb_id") }}

      - name: imdb_id
        description: |
          {{ doc("stg_tmdb_movies__imdb_id") }}
        tests:
          - unique
          - not_null

      - name: title
        description: |
          {{ doc("int_movies_mapping__title") }}

      - name: original_title
        description: |
          {{ doc("stg_tmdb_movies__original_title") }}

      - name: overview
        description: |
          {{ doc("stg_tmdb_movies__overview") }}

      - name: keywords
        description: |
          {{ doc("stg_tmdb_movies__keywords") }}

      - name: director
        description: |
          {{ doc("stg_omdb_movies__director") }}

      - name: writer
        description: |
          {{ doc("stg_omdb_movies__writer") }}

      - name: actors
        description: |
          {{ doc("stg_omdb_movies__actors") }}

      - name: type
        description: |
          {{ doc("stg_omdb_movies__type") }}

      - name: genre
        description: |
          {{ doc("int_movies_mapping__genre") }}

      - name: language
        description: |
          {{ doc("int_movies_mapping__language") }}

      - name: runtime
        description: |
          {{ doc("int_movies_mapping__runtime") }}

      - name: imdb_rating
        description: |
          {{ doc("int_movies_mapping__imdb_rating") }}

      - name: imdb_votes
        description: |
          {{ doc("int_movies_mapping__imdb_votes") }}

      - name: omdb_rt_rating
        description: |
          {{ doc("stg_omdb_movies__omdb_rt_rating") }}

      - name: number_of_awards_won
        description: |
          {{ doc("stg_omdb_movies__number_of_awards_won") }}

      - name: audience_score
        description: |
          {{ doc("stg_rotten_tomatoes__audience_score") }}

      - name: tomato_meter
        description: |
          {{ doc("stg_rotten_tomatoes__tomato_meter") }}

      - name: viewer_vote_average
        description: |
          {{ doc("stg_tmdb_movies__vote_average") }}

      - name: viewer_vote_count
        description: |
          {{ doc("stg_tmdb_movies__vote_count") }}

      - name: revenue
        description: |
          {{ doc("stg_tmdb_movies__revenue") }}

      - name: normalized_revenue
        description: |
          {{ doc("int_movies_mapping__normalized_revenue") }}

      - name: release_date
        description: |
          {{ doc("int_movies_mapping__release_date") }}


  - name: int_combined_movie_success
    description: |
      Intermediate model for calculating combined success metrics

    columns:
      - name: imdb_id
        description: |
          {{ doc("stg_tmdb_movies__imdb_id") }}
        tests:
          - unique
          - not_null

      - name: title
        description: |
          {{ doc("int_movies_mapping__title") }}

      - name: original_title
        description: |
          {{ doc("stg_tmdb_movies__original_title") }}

      - name: director
        description: |
          {{ doc("stg_omdb_movies__director") }}

      - name: actors
        description: |
          {{ doc("stg_omdb_movies__actors") }}

      - name: genre
        description: |
          {{ doc("int_movies_mapping__genre") }}

      - name: language
        description: |
          {{ doc("int_movies_mapping__language") }}

      - name: runtime
        description: |
          {{ doc("int_movies_mapping__runtime") }}

      - name: imdb_rating
        description: |
          {{ doc("int_movies_mapping__imdb_rating") }}

      - name: imdb_votes
        description: |
          {{ doc("int_movies_mapping__imdb_votes") }}

      - name: omdb_rt_rating
        description: |
          {{ doc("stg_omdb_movies__omdb_rt_rating") }}

      - name: number_of_awards_won
        description: |
          {{ doc("stg_omdb_movies__number_of_awards_won") }}

      - name: combined_rotten_tomato_rating
        description: |
          {{ doc("int_combined_movie_success__combined_rotten_tomato_rating") }}

      - name: viewer_vote_average
        description: |
          {{ doc("stg_tmdb_movies__vote_average") }}

      - name: viewer_vote_count
        description: |
          {{ doc("stg_tmdb_movies__vote_count") }}

      - name: revenue
        description: |
          {{ doc("stg_tmdb_movies__revenue") }}

      - name: normalized_revenue
        description: |
          {{ doc("int_movies_mapping__normalized_revenue") }}

      - name: release_date
        description: |
          {{ doc("int_movies_mapping__release_date") }}

      - name: combined_success_rating
        description: |
          {{ doc("int_combined_movie_success__combined_success_rating") }}
